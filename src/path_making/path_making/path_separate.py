import sys
try:
    # sys.path.append("/home/ps/planning/src/state_machine/state_machine")
    from DB import DB as db
except Exception as e:
    print(e)
    
def main():
    # doge
    ## delivery

    separater = db("dolge/origin/kcity_6th_bs_v1_marker.db")
    # node = [(2.513416475519381, 4.264265438390205), (26.998124903217057, 52.25067528481654), (42.61641483658474, 75.07033217796864), (55.46833360646599, 106.18934346776594), (65.92449542241795, 126.56007158763255), (81.25364091467992, 155.61757955054088), (91.84677110853161, 175.52690240895228), (108.06152480539149, 205.6454625190747), (129.02489622981835, 251.87502920249761), (140.40649968309583, 271.0149222690359), (145.0006915550704, 301.47342997733443), (149.7501860724219, 408.3677434124314), (150.3081659642, 432.3307362065412), (173.37459035116947, 435.3523666509334), (184.10703827783664, 425.4843220463863), (185.60136289353957, 379.73943187482587), (186.5792243654319, 345.8945559473041), (187.89562206794594, 305.23376668104135), (174.4538835383612, 262.268997697342), (161.9175644561088, 229.99270042400485), (158.53933285640363, 203.0586537181193), (151.78790988515587, 189.97185586916967), (136.03610923953636, 159.97227654159198), (127.52909899026331, 143.62896104850637), (103.36892082680632, 97.65644523378688), (83.43067343626558, 90.4749093616264), (64.29813418472523, 98.92054632856073), (43.65550678498895, 93.33281163092934), (35.68014409020278, 78.17481684361431), (21.149976563124973, 50.18943634535075)]
    node = [(173.82339477539062, 260.2573547363281, -67.02775480712215), (172.5334014892578, 256.25238037109375, -57.35131118986662)]
    b=[0,]
    print(len(node))
    for i in range(len(node)):
        a = separater.find_idx(node[i][0],node[i][1],"Path")
        print(a)
        b.append(a)
    print(b)
    b.append(1085)
    
    # last index not put ok?
    print(len(b))
    for i in range(0,len(b)-1):
        if i == 32:
            separater.splitPath(b[i],b[i+1],f"A{i+2}A{i+3}")
        else:
            separater.splitPath(b[i],b[i+1],f"A{i+1}A{i+2}")

main()